var colors_vals = ['rgba(255, 0, 0, 0.5)', 'rgba(249, 118, 0, 0.5)', 'rgba(246, 198, 0, 0.5)', 'rgba(96, 176, 68, 0.5)', 'rgba(61, 110, 43, 0.5)'],
  colors = ['word_red', 'word_orange', 'word_yellow', 'word_lightgreen', 'word_green'];


function predict(word) {
  //assumes words are lower cased and cleaned
  if (word in words) {
    return words[word];
  } else {
    return 0;
  }
}

function clean_split_words(full_string) {
  var cleaned = full_string.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,""),
  words = $.trim(cleaned).split(/\s/);
  return words;
}

function lowStemmer(string) {
  return stemmer(string.toLowerCase());
}

function predict_all(full_string) {
  var words = clean_split_words(full_string),
  final_val = 63.33;
  for(var i = 0; i < words.length; i++) {
    final_val += predict(lowStemmer(words[i]))*33.33333;
    if(final_val < 1)
      final_val = 1
  }
  return final_val;
}

function in_words(word) {
  return word in words
}

function make_words_colors_dict(text) {
  var matched_words = {},
  percentiles = [-0.64, -0.25, -0.03, 0.21],
  text_words = clean_split_words(text),
  stemmed_words = clean_split_words(text);
  for(var i = 0; i < text_words.length; i++) {
    stemmed_words[i] = lowStemmer(text_words[i]);
    if(stemmed_words[i] in words) {
      var val = predict(stemmed_words[i]);
      if (val < percentiles[0]) {
        matched_words[text_words[i]] = colors[0];
      } else if (val > percentiles[0] && val < percentiles[1]) {
        matched_words[text_words[i]] = colors[1];
      } else if (val > percentiles[1] && val < percentiles[2]) {
        matched_words[text_words[i]] = colors[2];
      } else if (val > percentiles[2] && val < percentiles[3]) {
        matched_words[text_words[i]] = colors[3];
      } else if (val > percentiles[3]) {
        matched_words[text_words[i]] = colors[4];
      }
    }
  }
  //console.log(matched_words);
  return matched_words;
}


var words = { 
'12':-0.27639180872208724,
'a':-0.13261811312394672,
'abil':-0.700111723087762,
'about':-0.05609811286610024,
'abov':0.303122214560542,
'absolut':0.7656924096168554,
'accid':-0.34284503375539416,
'activ':0.15631610501473747,
'addit':0.7647325090507037,
'addition':-0.5524763937270266,
'affect':-0.003545002487710197,
'after':0.03617683063007607,
'again':-0.0462148081378434,
'aggress':-0.5542680107810135,
'all':-0.1569028131925955,
'almond':-0.31152600501477035,
'alon':-0.4460721379816642,
'alreadi':0.041697694846359074,
'also':-0.012469288978997767,
'alwai':0.09017292662908341,
'am':-0.11393740833800055,
'amaz':0.6029532265490527,
'and':-0.024549830479442453,
'angri':-0.9521118190782991,
'ani':0.27801949626831984,
'annoi':-0.3483284311485729,
'anoth':-0.0934187695869369,
'anxieti':-0.16783665243648885,
'anxiou':-0.9125889782303753,
'anymor':-0.6899466560073868,
'anyon':-0.3188075790204349,
'anyth':-0.05322388349815463,
'anywai':1.5838803034473519,
'apart':-0.36277945675113166,
'applic':-0.25091188961052124,
'appoint':0.18702386006096838,
'argu':-1.4931322326977976,
'argument':-1.9530169113362892,
'attempt':-0.551760409732444,
'attribut':1.2274196032800442,
'august':-0.3484073344613151,
'aw':-0.19371793586652386,
'awai':-0.08230877358725255,
'awesom':0.08175982644891511,
'babi':0.23436146228851684,
'back':0.12482513925534952,
'bad':-0.708083820027366,
'badli':0.38828228234205064,
'bake':0.9962826249364786,
'bare':-0.7787473219070747,
'barr':0.9706359633284578,
'basic':-0.023562451508407044,
'be':0.08274349035957741,
'beach':0.047278179122761096,
'beauti':0.45592324188364475,
'becaus':-0.09330068436254857,
'becom':-0.4536077331488065,
'bed':0.14422137579867872,
'been':0.10442855137729194,
'beer':0.6784003858960165,
'begin':-0.27171081537365427,
'best':0.29368941130980725,
'bf':-0.3162503300426006,
'bill':0.6876640928648228,
'birthdai':0.24221437790101372,
'bit':-0.049505296894777784,
'bitch':-0.9962322026204093,
'blah':-0.48582166613194966,
'bless':0.22574689833136974,
'blue':-1.360240601302335,
'book':0.028916714452343145,
'boost':0.17549881456115182,
'bore':-0.5555607811854366,
'boss':-0.39088104491212566,
'bowl':0.6175222886337999,
'breakfast':0.05946592075646137,
'broke':-0.8906213131842156,
'broken':-1.117589538525352,
'brother':0.4937585933132875,
'bu':-1.0605992815109317,
'bum':-0.5257575610143197,
'but':0.14614700119033042,
'cake':-0.01969135070739328,
'california':1.466596442780658,
'call':0.15341042102639962,
'came':0.0420886044453318,
'can':-0.09494164545693425,
'cant':-0.3403939613067203,
'casei':0.3759400692575009,
'cat':0.5706373930378508,
'caus':-0.3013046102486153,
'celebr':0.4963025108441596,
'certain':-0.6892656073558201,
'chanc':-0.814489234064659,
'chang':-0.22985091598283014,
'char':0.34581317485410323,
'chat':-0.27800075010400915,
'chill':0.31034687681292006,
'choic':-0.7586557073823306,
'church':0.2873248062560084,
'client':-0.051999959456728376,
'clock':0.012486807629664504,
'cold':-0.5048963386761232,
'come':-0.06437665712560203,
'commun':-0.5062451204399516,
'commut':-0.5414446536143666,
'complet':0.13434918857825837,
'concern':-0.20758695601618116,
'confer':-0.5255107671547223,
'conflict':-1.5658585096448996,
'confus':0.3839894767990113,
'control':0.46044717857613027,
'cook':0.1472642089773331,
'couch':-0.6388671997739069,
'cough':-0.6720142849786455,
'could':-0.1715236950054665,
'couldn':-0.2426481601787649,
'count':-0.7247341195029837,
'cousin':0.3870786621570859,
'cranki':-0.4441386490377678,
'crap':0.06669402524693868,
'crappi':-0.7959893926116501,
'crazi':-0.51991000019068,
'cry':0.27271967352842147,
'cuddl':0.43529389895633164,
'cute':0.14239853603437583,
'dai':0.03729910234094999,
'deadlin':-0.4209425954597423,
'deal':-0.3747687826744613,
'death':-1.7426862107309153,
'decid':-0.31194562959577876,
'decis':0.5502255924472083,
'decreas':-0.8466905706073089,
'delai':-0.15957688831355654,
'delici':0.22780992498385988,
'depress':-0.18658297034027874,
'desk':-1.5825681040269215,
'dessert':-0.1599089456421397,
'di':-0.5898983598142764,
'did':-0.018271091584156962,
'didn':-0.27974084838663965,
'didnt':-0.5805278190063745,
'differ':0.16468200854160348,
'difficult':-0.25461312787065427,
'dinner':0.12612412463904732,
'disappoint':-0.9039697894055829,
'discourag':-0.5179001613561284,
'distract':-1.000811179669111,
'divorc':-2.1027580745869523,
'do':-0.00023776622742938125,
'doctor':0.06349560733981663,
'doe':-0.2846063844116797,
'doesn':0.15965833890577502,
'don':-0.398790891965629,
'dont':0.25541059514237774,
'down':-0.025481779384125255,
'drain':-0.26216152299250095,
'drank':-0.29639302670566264,
'dread':-0.1116632117607741,
'drink':0.21970972957387702,
'due':-0.19163897919500927,
'dylan':0.671773693767727,
'eas':0.16502281677604136,
'eat':0.10758327572067855,
'effort':-0.5360740880866205,
'either':0.5638962615941829,
'els':0.6160602369350292,
'email':0.017966623810458715,
'embarrass':-0.9569479534228931,
'emot':-0.3562167970339752,
'emotion':-1.6464480352837398,
'energ':0.12428581513560563,
'energi':0.05607438003597254,
'enjoi':0.2501513816525639,
'enjoy':0.32286964893004627,
'enough':-0.010510170266931601,
'entri':0.397851724627971,
'erik':-0.8065701124213078,
'everydai':-0.6310426853756326,
'everyth':0.281150226213652,
'exam':-0.7934839986107144,
'excel':0.42349391106795564,
'except':-0.22642413782315252,
'excit':0.5909718293914036,
'exercis':0.26032879531085396,
'exhaust':-0.48560070475767375,
'expect':-0.051988062177456495,
'expens':-0.038793243803083854,
'extrem':-0.25340765434874535,
'face':0.2138361672462259,
'faith':0.7468932150164882,
'famili':0.22482563922441046,
'fast':-0.16174699422201227,
'father':0.06346552200546901,
'fatigu':-0.6547313986787417,
'favorit':0.3516084136805477,
'feel':-0.014746432729572732,
'fell':-0.8481170822426964,
'festiv':0.3856011512626255,
'fianc':1.0013650862570094,
'fight':-0.925612456294421,
'financi':-0.2810819286332588,
'find':-0.3965074618611453,
'fine':-0.2538615380853321,
'fix':-0.08523898478501726,
'flat':-0.6157871406000281,
'flu':0.0985388744362179,
'focu':-0.28801071535626593,
'food':0.08699487674345598,
'footbal':1.4436269586488675,
'form':0.617847494140274,
'forward':0.07986161248846102,
'fought':-0.17104343242634645,
'found':-0.4977566492256278,
'freak':-0.3004213100086368,
'free':0.18367765067724778,
'freelanc':1.482173460113585,
'fri':0.6395297712616428,
'fridai':0.011250585910948158,
'friend':0.04283135005350086,
'from':-0.08168295307919783,
'front':-0.2584424186909779,
'frustrat':-0.9607098211536476,
'full':0.13933136290382592,
'fun':0.25408515479814775,
'funer':-0.6574304255883407,
'funni':0.322622689407423,
'game':0.13302532185725427,
'gave':0.12540928323497796,
'gener':-0.7271898588572518,
'get':0.007755828357291314,
'gf':0.11816413799574133,
'gift':0.2907804591029209,
'gig':0.2101778669012389,
'god':0.4116319239460222,
'good':0.3080399063959496,
'got':0.08137540600420591,
'grab':0.23616453527610703,
'grandma':-1.0337610764659313,
'great':0.45121221542110257,
'grumpi':-0.7860657227093362,
'guess':-0.22732344677425917,
'guilti':-0.6339988876495106,
'gym':0.28733598887501943,
'ha':0.0600918322242994,
'had':-0.006743442635528722,
'hadn':-0.8477099872706978,
'hand':0.2568527924163019,
'hang':0.28575954911482815,
'happen':0.08756212368564223,
'happi':0.5226038256062708,
'happier':0.6742033767426068,
'hard':-0.39485529173812683,
'hate':-0.32372508568436253,
'have':0.11243983985813834,
'haven':-0.31480739231286137,
'headach':-1.1983239700689814,
'healthi':0.03207201510186902,
'hear':0.15818565229476833,
'heard':-0.048244346823578255,
'heartburn':-0.03871431272764547,
'her':0.05184534618187517,
'high':-0.2025248464827584,
'hike':-0.015796423172619707,
'him':0.15805662131113785,
'hold':-0.2141984299968054,
'homework':-0.445750934178092,
'honestli':-0.23191944963018762,
'hopefulli':0.056088720706467754,
'horribl':-0.700768632356724,
'hospit':0.10487214714045623,
'hot':-0.5228131711984166,
'hour':-0.15031919307281033,
'how':-0.058575796373524586,
'howev':0.13892661270196383,
'hubbi':0.36194983666516445,
'hungri':-0.10350459634720016,
'hurt':-0.6249987576287344,
'i':-0.10363621438149613,
'if':0.21299476870107467,
'ill':-1.3286572345705512,
'im':-0.12913457043322987,
'import':0.3026083326440341,
'increas':0.32514487231554684,
'insecur':-0.6870951773268956,
'instead':0.24092503464308895,
'instructor':0.030397125707459866,
'intens':-0.21559141099289214,
'interact':-0.7492626230478436,
'internet':-0.6785533507035499,
'into':-0.09121226735481902,
'invit':0.381682998624898,
'involv':-0.6387806984342853,
'irrit':-0.11961544805103869,
'isn':-0.07862874735642558,
'issu':-1.1127961101202226,
'it':0.032618382594846465,
'joann':0.6544599655892402,
'job':-0.07974562504078496,
'joi':0.28135183071803493,
'just':-0.06958967190507168,
'kept':-0.012756754110439084,
'kinda':-0.05278894046005514,
'knew':-0.34750812648640783,
'know':0.6509551521203615,
'lab':-0.20984173977494422,
'lack':-0.234836824557016,
'lai':0.5952586880542857,
'lake':0.3810436770998863,
'larg':0.27281107548974176,
'late':-0.2953967547658436,
'laugh':0.3376134314412356,
'leav':0.06271946822173047,
'left':-0.357091120455218,
'legal':0.4278383299721311,
'leisur':0.2715100173223534,
'let':0.21278273188921557,
'letharg':-0.14083245027400848,
'like':0.06867484212684549,
'list':0.05746458837280477,
'listen':0.10170799452740505,
'liter':0.21913296491619927,
'littl':0.05942223125832355,
'load':0.37832059466721635,
'lone':-0.38883181158139446,
'loneli':-0.6058063798128008,
'lose':0.05299106451552765,
'lost':-0.7372391400705695,
'loung':0.19168601864597126,
'love':0.4220076996209709,
'low':-0.13002452024498673,
'lunch':0.1374195543274963,
'mad':-1.9202037838393424,
'mai':0.01930992495330356,
'major':-0.47959935144869376,
'manag':-0.15765917189481615,
'mani':-0.06821206139344349,
'massag':-0.17724205995022801,
'math':-0.7318786647782283,
'matter':0.9274226815984019,
'mayb':0.3323339885291236,
'me':-0.002013528029691722,
'meal':0.4183472337042942,
'mean':-0.3897199560298691,
'medic':-1.069693813752445,
'meh':-1.0031082627665409,
'member':-0.5650195538943912,
'mental':-0.18710414148894414,
'mess':-0.5403830105314444,
'met':0.627586766011724,
'mexican':-0.13291178484346508,
'midterm':-0.48402496236937337,
'migrain':-1.3252429927374803,
'miss':-0.6648727134959932,
'mistak':-0.6033961011495326,
'mom':0.09832008494419285,
'moment':0.10090997153999869,
'monei':0.13172380702189435,
'month':0.3733940363155348,
'more':0.042023185665679,
'mountain':-0.4534474667779271,
'mouth':-1.119558375510592,
'much':0.05567453293405575,
'museum':0.7195350611149033,
'music':-0.09665360803725304,
'myself':0.1828465860300238,
'nap':0.3250128111130583,
'natali':1.7435655530243657,
'natur':1.1625839085263672,
'necessarili':1.0932546358205426,
'need':-0.30573669733047937,
'neg':-0.9887672793488224,
'nephew':0.48977941366624095,
'nervou':-0.8656644843006405,
'neutral':-0.4381265476795337,
'never':0.10220793726862953,
'nice':0.10765676082182937,
'night':0.06465060785921423,
'nightmar':-0.7327991877248842,
'no':-0.30702987243347685,
'noah':-0.6601784383183457,
'nor':-0.5936952145754788,
'not':-0.39125866646365126,
'note':0.21131701074385922,
'noth':-0.6409281564992011,
'notic':-0.8313364908549555,
'of':0.00015389985105512816,
'ok':-0.2051696254982632,
'okai':0.1292068938301142,
'old':0.45906573378516075,
'onli':-0.2769980773622783,
'open':-0.9802929907718171,
'option':-0.38599685636352565,
'or':-0.02004014881762939,
'other':-0.09701294578387108,
'overwhelm':-0.8991992156617156,
'own':-0.08096834914861328,
'pain':-1.1287186868028367,
'particularli':-0.4200563234894114,
'pass':-0.8684328941372023,
'patienc':1.2869552661067898,
'peopl':-0.09111569154100664,
'perfect':0.6361569161674114,
'period':-0.9081110636136204,
'person':0.2200463690019398,
'pet':0.3563912221691462,
'phone':0.074108381147538,
'physic':0.023091306670251693,
'piss':-1.0764234389127056,
'pizza':0.39483136694389603,
'place':0.5070978050406408,
'plai':0.11037460949221539,
'plate':0.3714994619996694,
'plenti':-0.6962369131507604,
'poison':-1.1759193126302276,
'pool':0.5531110083303475,
'poor':0.44158799837490814,
'poorli':-0.8087130157100628,
'posit':0.6519840722952811,
'prai':0.6687928367628,
'prais':0.08407599854077796,
'prayer':0.39367545516376456,
'pressur':-0.7114460635672933,
'probabl':0.045512145903154555,
'problem':-0.2671317863499805,
'product':0.2643823585642621,
'proper':0.6848017684811653,
'proud':0.7146147325649996,
'pull':-0.8892795078886988,
'push':-1.2473829717029856,
'qualiti':0.9757343928580422,
'quiz':-0.927563106199037,
'random':0.4826407067137371,
'reach':-1.0154903873936236,
'readi':0.20300489511952732,
'recov':1.2463243607533836,
'relax':0.31392380714588913,
'reliev':0.2992004669348648,
'remind':0.5861640595456543,
'resolv':0.2790449541508257,
'respect':-0.46107910921760153,
'rest':0.2612020949905121,
'restaur':-0.14843294857055106,
'restless':-0.32704471080241804,
'result':-0.20152845929803995,
'review':-0.5518056981069843,
'rid':0.024981132340641976,
'ridicul':0.21441640593560163,
'right':0.01458921141553271,
'role':0.6088770497082068,
'roommat':-0.3680929493300903,
'rough':-0.9050359421923496,
'row':-1.0583224678233474,
'run':-0.19586422043909824,
'rush':0.04015338081028984,
'sad':-0.50395570188203,
'sai':0.020474065159203247,
'said':0.23339946367595205,
'salad':0.48793579047704927,
'same':-0.4461138156904366,
'sat':-0.5158475367600931,
'satisfi':0.4398610171114207,
'schedul':-0.3755200461176529,
'school':0.06006465118621109,
'schoolwork':-1.4976797430138094,
'see':0.19114297165184588,
'send':-0.7933595937398916,
'separ':0.043306706144397855,
'shake':-0.034328174050213045,
'share':0.358180577323136,
'she':0.042376237456363715,
'shift':-0.931514873982113,
'shitti':-0.7580916669387926,
'shop':0.1413652467168257,
'should':-0.21225971276989725,
'shoulder':0.12089832818452506,
'shouldn':-0.009895503443762332,
'sibl':0.3480825005966887,
'sick':-0.941907955609983,
'sing':1.236508959401966,
'sister':-0.05972626708150819,
'situat':0.038043669534781596,
'slack':-1.3051528913315689,
'sleep':-0.022030472446102206,
'sleepi':-0.08411434601589388,
'so':-0.018301515918246164,
'solid':0.383241921042548,
'someon':-0.34509544809922205,
'someth':-0.060371089080697105,
'soon':-0.2652682096987953,
'sooner':-0.4146497845381456,
'sore':-0.7102804622923365,
'sorri':-1.6758344945591448,
'sour':-0.6009387106862392,
'spend':-0.02730791267982749,
'spent':0.03776186709875924,
'spin':0.5168695934872258,
'star':0.47079769591972653,
'starbuck':-0.33006743822150997,
'starv':-0.5621478029749225,
'step':0.08735223727835356,
'still':0.0767610984315146,
'stomach':0.38795253311981187,
'stori':0.2293598692111603,
'stress':-0.4883236306648704,
'stuck':-0.5212469232597409,
'stupid':-0.42314259538030796,
'suck':0.5743398287114748,
'super':-0.03480773996404679,
'supervisor':0.545257063408128,
'suppos':0.5317937625824818,
'sure':0.1597553126204129,
'swim':0.06688946639710558,
'talk':-0.04833559762051867,
'tast':0.2191674078597492,
'tea':0.05374487104228923,
'teacher':0.11803533305997094,
'tell':0.06346197478461094,
'terribl':-0.9349115326171191,
'test':-0.001760240701891902,
'than':-0.12375016658030497,
'that':-0.004449719254804224,
'the':0.08070979610870849,
'there':0.2657233956486832,
'thi':0.03212029950731809,
'thing':0.01542315167673336,
'think':-0.09762632095331918,
'those':-0.22090559979899954,
'though':0.051830967928393715,
'thought':-0.34681330635142316,
'thrill':1.014223505945002,
'through':-0.07018452391911623,
'throughout':-0.5512988858064068,
'thu':-0.16361932281677222,
'ti':0.8469589392159896,
'time':0.07655488727712953,
'tire':-0.27533817704328245,
'to':0.03537658116971689,
'todai':0.01051823489819478,
'too':-0.28619763459069064,
'took':-0.016746367100327564,
'tooth':-0.845248454089045,
'total':-0.7144381731806364,
'track':-0.32340116118087325,
'traffic':-0.30545065962707785,
'train':-0.11761195049441997,
'trek':-0.2822365125516709,
'trip':0.23435866687132367,
'truli':0.028244844853860196,
'try':-0.28593161402264033,
'turn':0.10952870827623762,
'two':0.30704632220273204,
'uncomfort':-2.043837085510856,
'under':-0.9570439501307224,
'understand':-0.40673274871495374,
'unhappi':-0.017252322235872475,
'union':-0.5349033918054467,
'unproduct':-0.5637973824744302,
'until':-0.04266510543567387,
'unwel':-1.2371406854125204,
'up':0.045215496086484674,
'upbeat':0.7949654027630204,
'uplift':0.8704870250961785,
'upset':-0.7165011783395441,
'useless':-0.3045058114215673,
'veri':-0.07980059143118862,
'visit':-0.037719630104878776,
'wa':-0.04727978007815854,
'wait':-0.32523189415709014,
'walk':0.22429013347726312,
'want':-0.2741835324290236,
'wasn':0.1511009244081713,
'wast':-0.6052621488033412,
'water':0.01591607097236422,
'we':0.16814862963820604,
'wed':0.7368179712186946,
'weird':-0.12110423682825139,
'went':0.16178796954392136,
'were':-0.3206779527654372,
'what':0.08953099787996582,
'when':0.17804966365671762,
'while':0.04029416981951392,
'who':-0.22569984098047674,
'wine':0.44659554154162057,
'wish':-0.5537952140657132,
'with':0.09169836471702993,
'woman':-0.4161560717167382,
'won':-0.42584944818338244,
'wonder':-0.14645614148971098,
'work':0.03603150219704383,
'workout':0.33407561809766156,
'worri':-0.24789562474599383,
'wors':-0.6242320365019017,
'worst':-0.5096073152868579,
'would':-0.03321040581585877,
'wrong':0.17888554939026102,
'yai':0.45906320552696156,
'yard':0.13262239780059415,
'yesterdai':0.04640871002387745,
'yet':-0.04136589625259676,
}
